import Image from 'next/image'
import React, { useEffect, useState } from 'react'
import { getStrapiMedia } from '@/utils/media'
import Sticky from '@/components/Sticky'

export default function Feature({ feature }) {
	const [openTab, setopenTab] = useState(0)

	const i1 = (
		<svg
			width='56'
			height='56'
			viewBox='0 0 56 56'
			fill='none'
			xmlns='http://www.w3.org/2000/svg'
		>
			<rect x='4' y='4' width='48' height='48' rx='24' fill='#E1F9F5' />
			<rect
				x='4'
				y='4'
				width='48'
				height='48'
				rx='24'
				stroke='#EBFBF8'
				strokeWidth='8'
			/>
			<path
				d='M19 20V34C19 34.5304 19.2107 35.0391 19.5858 35.4142C19.9609 35.7893 20.4696 36 21 36H35C35.5304 36 36.0391 35.7893 36.4142 35.4142C36.7893 35.0391 37 34.5304 37 34V24H33'
				stroke='#34DAB9'
				strokeWidth='1.5'
				strokeLinecap='round'
				strokeLinejoin='round'
			/>
			<path
				d='M19 20H33V34C33 34.5304 33.2107 35.0391 33.5858 35.4142C33.9609 35.7893 34.4696 36 35 36M29 24H23M29 28H25'
				stroke='#34DAB9'
				strokeWidth='1.5'
				strokeLinecap='round'
				strokeLinejoin='round'
			/>
		</svg>
	)
	const i2 = (
		<svg
			width='56'
			height='56'
			viewBox='0 0 56 56'
			fill='none'
			xmlns='http://www.w3.org/2000/svg'
		>
			<rect x='4' y='4' width='48' height='48' rx='24' fill='#E1F9F5' />
			<rect
				x='4'
				y='4'
				width='48'
				height='48'
				rx='24'
				stroke='#EBFBF8'
				strokeWidth='8'
			/>
			<g clipPath='url(#clip0_1470_4903)'>
				<path
					d='M27.9542 18.0508L31.0582 24.7788L38.4162 25.6518L32.9762 30.6818L34.4202 37.9498L27.9542 34.3308L21.4882 37.9508L22.9322 30.6828L17.4922 25.6508L24.8512 24.7778L27.9542 18.0508Z'
					stroke='#34DAB9'
					strokeWidth='2.5'
					strokeLinejoin='round'
				/>
			</g>
			<defs>
				<clipPath id='clip0_1470_4903'>
					<rect
						width='24'
						height='24'
						fill='white'
						transform='translate(16 16)'
					/>
				</clipPath>
			</defs>
		</svg>
	)
	const i3 = (
		<svg
			width='56'
			height='56'
			viewBox='0 0 56 56'
			fill='none'
			xmlns='http://www.w3.org/2000/svg'
		>
			<rect x='4' y='4' width='48' height='48' rx='24' fill='#E1F9F5' />
			<rect
				x='4'
				y='4'
				width='48'
				height='48'
				rx='24'
				stroke='#EBFBF8'
				strokeWidth='8'
			/>
			<path
				d='M24 29C24 27.585 24 26.878 24.44 26.44C24.879 26 25.586 26 27 26H29C30.415 26 31.122 26 31.56 26.44C32 26.879 32 27.586 32 29V38V35C32 33.585 32 32.878 32.44 32.44C32.879 32 33.586 32 35 32C36.415 32 37.122 32 37.56 32.44C38 32.879 38 33.586 38 35V38M24 33V38C24 36.586 24 35.879 23.56 35.44C23.122 35 22.415 35 21 35C19.586 35 18.879 35 18.44 35.44C18 35.878 18 36.585 18 38'
				stroke='#34DAB9'
				strokeWidth='1.5'
				strokeLinecap='round'
			/>
			<path
				d='M27.1463 19.023C27.5263 18.34 27.7163 18 28.0003 18C28.2843 18 28.4743 18.34 28.8543 19.023L28.9523 19.199C29.0603 19.393 29.1143 19.489 29.1983 19.553C29.2833 19.617 29.3883 19.641 29.5983 19.688L29.7883 19.732C30.5263 19.899 30.8953 19.982 30.9833 20.264C31.0713 20.547 30.8193 20.841 30.3163 21.429L30.1863 21.581C30.0433 21.748 29.9713 21.831 29.9393 21.935C29.9073 22.039 29.9183 22.15 29.9393 22.373L29.9593 22.576C30.0353 23.361 30.0733 23.754 29.8443 23.928C29.6143 24.103 29.2683 23.943 28.5773 23.625L28.3993 23.543C28.2023 23.453 28.1043 23.407 28.0003 23.407C27.8963 23.407 27.7983 23.453 27.6013 23.543L27.4233 23.625C26.7323 23.943 26.3863 24.103 26.1563 23.928C25.9263 23.754 25.9653 23.361 26.0413 22.576L26.0613 22.373C26.0823 22.15 26.0933 22.039 26.0613 21.935C26.0293 21.832 25.9573 21.748 25.8143 21.581L25.6843 21.429C25.1813 20.841 24.9293 20.547 25.0173 20.264C25.1053 19.982 25.4743 19.899 26.2123 19.732L26.4023 19.688C26.6123 19.641 26.7173 19.618 26.8023 19.553C26.8863 19.489 26.9403 19.393 27.0483 19.199L27.1463 19.023Z'
				stroke='#34DAB9'
				strokeWidth='1.5'
			/>
		</svg>
	)
	const i4 = (
		<svg
			width='56'
			height='56'
			viewBox='0 0 56 56'
			fill='none'
			xmlns='http://www.w3.org/2000/svg'
		>
			<rect x='4' y='4' width='48' height='48' rx='24' fill='#E1F9F5' />
			<rect
				x='4'
				y='4'
				width='48'
				height='48'
				rx='24'
				stroke='#EBFBF8'
				strokeWidth='8'
			/>
			<g clipPath='url(#clip0_1470_4900)'>
				<path
					d='M31.3511 17.4205L31.5749 18.3952L31.5751 18.3951L31.3511 17.4205ZM33.1048 18.1459L33.9523 17.6151L33.9518 17.6143L33.1048 18.1459ZM34.7324 20.7445L33.8849 21.2753L33.8852 21.2757L34.7324 20.7445ZM35.2498 21.2619L34.7186 22.1092L34.719 22.1094L35.2498 21.2619ZM37.8484 22.8895L37.3176 23.737L37.3179 23.7372L37.8484 22.8895ZM38.5755 24.6449L39.55 24.8693L39.55 24.8692L38.5755 24.6449ZM37.8877 27.6316L36.9132 27.4072L36.9131 27.4076L37.8877 27.6316ZM37.8877 28.3651L36.9131 28.5891L36.9132 28.5894L37.8877 28.3651ZM38.5755 31.3534L39.5504 31.1309L39.55 31.1292L38.5755 31.3534ZM37.8484 33.1055L37.3175 32.2581L37.3172 32.2583L37.8484 33.1055ZM35.2498 34.7347L35.7797 35.5828L35.781 35.582L35.2498 34.7347ZM34.7324 35.2522L35.5799 35.783L35.5805 35.782L34.7324 35.2522ZM33.1048 37.8508L32.2573 37.32L32.2572 37.3201L33.1048 37.8508ZM31.3511 38.5778L31.1268 39.5523L31.1276 39.5525L31.3511 38.5778ZM28.3628 37.8901L28.5871 36.9156L28.5863 36.9154L28.3628 37.8901ZM27.6308 37.8901L27.4073 36.9154L27.4066 36.9156L27.6308 37.8901ZM24.6425 38.5778L24.866 39.5525L24.8668 39.5523L24.6425 38.5778ZM22.8888 37.8508L23.7364 37.3201L23.7363 37.32L22.8888 37.8508ZM21.2612 35.2522L22.1087 34.7214L22.1077 34.7197L21.2612 35.2522ZM20.7422 34.7347L20.2111 35.5821L20.2124 35.5829L20.7422 34.7347ZM18.1452 33.1071L18.6762 32.2598L18.6759 32.2596L18.1452 33.1071ZM17.4182 31.3534L16.4435 31.1297L16.4434 31.13L17.4182 31.3534ZM18.1042 28.3651L17.1297 28.1411L17.1296 28.1414L18.1042 28.3651ZM18.1042 27.6316L19.0788 27.4076L19.0787 27.4072L18.1042 27.6316ZM17.4165 24.6449L16.4419 24.8687L16.442 24.8693L17.4165 24.6449ZM18.1452 22.8895L18.6748 23.7378L18.6762 23.7369L18.1452 22.8895ZM20.7422 21.2619L20.2126 20.4137L20.2111 20.4146L20.7422 21.2619ZM21.2612 20.7445L22.1078 21.2768L22.1087 21.2753L21.2612 20.7445ZM22.8888 18.1459L22.042 17.6141L22.0413 17.6151L22.8888 18.1459ZM24.6409 17.4205L24.8645 16.4458L24.864 16.4457L24.6409 17.4205ZM27.6308 18.1066L27.4072 19.0813L27.4073 19.0813L27.6308 18.1066ZM28.3628 18.1066L28.5863 19.0813L28.5865 19.0812L28.3628 18.1066ZM24.6198 28.1542C24.2209 27.7722 23.5879 27.7859 23.2059 28.1848C22.8239 28.5836 22.8375 29.2166 23.2364 29.5986L24.6198 28.1542ZM27.2603 32.0678L26.5686 32.79C26.7891 33.0012 27.0941 33.1001 27.3966 33.0585C27.6991 33.0168 27.966 32.8392 28.1213 32.5763L27.2603 32.0678ZM32.9272 24.4382C33.208 23.9627 33.0502 23.3495 32.5746 23.0687C32.0991 22.7878 31.4859 22.9457 31.2051 23.4212L32.9272 24.4382ZM31.5751 18.3951C31.7041 18.3654 31.8392 18.3767 31.9615 18.4273L32.726 16.5792C32.2198 16.3698 31.661 16.3232 31.1271 16.4459L31.5751 18.3951ZM31.9615 18.4273C32.0839 18.4779 32.1874 18.5654 32.2578 18.6775L33.9518 17.6143C33.6606 17.1503 33.2322 16.7885 32.726 16.5792L31.9615 18.4273ZM32.2573 18.6767L33.8849 21.2753L35.5799 20.2137L33.9523 17.6151L32.2573 18.6767ZM33.8852 21.2757C34.0966 21.6129 34.3815 21.8978 34.7186 22.1092L35.7811 20.4147C35.6996 20.3636 35.6307 20.2948 35.5796 20.2133L33.8852 21.2757ZM34.719 22.1094L37.3176 23.737L38.3793 22.0421L35.7806 20.4144L34.719 22.1094ZM37.3179 23.7372C37.4303 23.8075 37.5179 23.9112 37.5687 24.0336L39.4165 23.2683C39.2066 22.7616 38.8439 22.3329 38.379 22.0419L37.3179 23.7372ZM37.5687 24.0336C37.6194 24.1561 37.6307 24.2914 37.6009 24.4206L39.55 24.8692C39.673 24.3347 39.6263 23.7751 39.4165 23.2683L37.5687 24.0336ZM37.601 24.4205L36.9132 27.4072L38.8622 27.8559L39.55 24.8693L37.601 24.4205ZM36.9131 27.4076C36.8238 27.7963 36.8238 28.2003 36.9131 28.5891L38.8623 28.1411C38.8407 28.0472 38.8407 27.9495 38.8623 27.8556L36.9131 27.4076ZM36.9132 28.5894L37.6009 31.5777L39.55 31.1292L38.8623 28.1409L36.9132 28.5894ZM37.6005 31.576C37.63 31.705 37.6186 31.84 37.5679 31.9622L39.4151 32.7287C39.625 32.2231 39.6722 31.6646 39.5504 31.1309L37.6005 31.576ZM37.5679 31.9622C37.5171 32.0844 37.4296 32.1878 37.3175 32.2581L38.3794 33.9529C38.8433 33.6623 39.2053 33.2344 39.4151 32.7287L37.5679 31.9622ZM37.3172 32.2583L34.7186 33.8875L35.781 35.582L38.3796 33.9527L37.3172 32.2583ZM34.72 33.8867C34.3815 34.0981 34.0958 34.3839 33.8843 34.7223L35.5805 35.782C35.6309 35.7014 35.699 35.6332 35.7797 35.5828L34.72 33.8867ZM33.8849 34.7214L32.2573 37.32L33.9523 38.3816L35.5799 35.783L33.8849 34.7214ZM32.2572 37.3201C32.1869 37.4323 32.0834 37.5199 31.9611 37.5706L32.727 39.4181C33.2332 39.2083 33.6615 38.846 33.9523 38.3815L32.2572 37.3201ZM31.9611 37.5706C31.8387 37.6213 31.7036 37.6327 31.5745 37.6031L31.1276 39.5525C31.6618 39.675 32.2208 39.628 32.727 39.4181L31.9611 37.5706ZM31.5754 37.6033L28.5871 36.9156L28.1385 38.8646L31.1268 39.5523L31.5754 37.6033ZM28.5863 36.9154C28.1983 36.8264 27.7953 36.8264 27.4073 36.9154L27.8543 38.8648C27.9481 38.8433 28.0455 38.8433 28.1393 38.8648L28.5863 36.9154ZM27.4066 36.9156L24.4182 37.6033L24.8668 39.5523L27.8551 38.8646L27.4066 36.9156ZM24.4191 37.6031C24.29 37.6327 24.1549 37.6213 24.0325 37.5706L23.2666 39.4181C23.7728 39.628 24.3318 39.675 24.866 39.5525L24.4191 37.6031ZM24.0325 37.5706C23.9102 37.5199 23.8067 37.4323 23.7364 37.3201L22.0413 38.3815C22.3321 38.846 22.7604 39.2083 23.2666 39.4181L24.0325 37.5706ZM23.7363 37.32L22.1087 34.7214L20.4137 35.783L22.0413 38.3816L23.7363 37.32ZM22.1077 34.7197C21.8956 34.3825 21.6098 34.0977 21.2719 33.8866L20.2124 35.5829C20.2942 35.634 20.3634 35.703 20.4148 35.7846L22.1077 34.7197ZM21.2732 33.8874L18.6762 32.2598L17.6141 33.9545L20.2111 35.5821L21.2732 33.8874ZM18.6759 32.2596C18.5636 32.1893 18.4761 32.0858 18.4254 31.9634L16.5778 32.7294C16.7877 33.2356 17.15 33.6639 17.6145 33.9547L18.6759 32.2596ZM18.4254 31.9634C18.3746 31.8411 18.3633 31.706 18.3929 31.5769L16.4434 31.13C16.321 31.6641 16.368 32.2231 16.5778 32.7294L18.4254 31.9634ZM18.3928 31.5772L19.0789 28.5889L17.1296 28.1414L16.4435 31.1297L18.3928 31.5772ZM19.0788 28.5891C19.1682 28.2003 19.1682 27.7963 19.0788 27.4076L17.1297 27.8556C17.1513 27.9495 17.1513 28.0472 17.1297 28.1411L19.0788 28.5891ZM19.0787 27.4072L18.391 24.4205L16.442 24.8693L17.1297 27.8559L19.0787 27.4072ZM18.3912 24.4211C18.3615 24.2918 18.3729 24.1566 18.4237 24.0341L16.5765 23.2673C16.3662 23.7741 16.3191 24.3339 16.4419 24.8687L18.3912 24.4211ZM18.4237 24.0341C18.4746 23.9116 18.5623 23.808 18.6748 23.7378L17.6155 22.0413C17.1501 22.3319 16.7869 22.7605 16.5765 23.2673L18.4237 24.0341ZM18.6762 23.7369L21.2732 22.1093L20.2111 20.4146L17.6141 22.0422L18.6762 23.7369ZM21.2717 22.1102C21.6098 21.8991 21.8957 21.6142 22.1078 21.2768L20.4146 20.2122C20.3634 20.2938 20.2943 20.3627 20.2126 20.4137L21.2717 22.1102ZM22.1087 21.2753L23.7363 18.6767L22.0413 17.6151L20.4137 20.2137L22.1087 21.2753ZM23.7357 18.6777C23.806 18.5657 23.9095 18.4783 24.0317 18.4277L23.2666 16.5798C22.761 16.7892 22.333 17.1506 22.042 17.6141L23.7357 18.6777ZM24.0317 18.4277C24.1539 18.3771 24.2888 18.3658 24.4178 18.3953L24.864 16.4457C24.3305 16.3236 23.7723 16.3705 23.2666 16.5798L24.0317 18.4277ZM24.4172 18.3952L27.4072 19.0813L27.8545 17.1319L24.8645 16.4458L24.4172 18.3952ZM27.4073 19.0813C27.7953 19.1703 28.1983 19.1703 28.5863 19.0813L28.1393 17.1319C28.0455 17.1534 27.9481 17.1534 27.8543 17.1319L27.4073 19.0813ZM28.5865 19.0812L31.5749 18.3952L31.1273 16.4459L28.139 17.132L28.5865 19.0812ZM23.2364 29.5986L26.5686 32.79L27.9519 31.3456L24.6198 28.1542L23.2364 29.5986ZM28.1213 32.5763L32.9272 24.4382L31.2051 23.4212L26.3992 31.5593L28.1213 32.5763Z'
					fill='#34DAB9'
				/>
			</g>
			<defs>
				<clipPath id='clip0_1470_4900'>
					<rect
						width='24'
						height='24'
						fill='white'
						transform='translate(16 16)'
					/>
				</clipPath>
			</defs>
		</svg>
	)
	const i5 = (
		<svg
			width='56'
			height='56'
			viewBox='0 0 56 56'
			fill='none'
			xmlns='http://www.w3.org/2000/svg'
		>
			<rect x='4' y='4' width='48' height='48' rx='24' fill='#E1F9F5' />
			<rect
				x='4'
				y='4'
				width='48'
				height='48'
				rx='24'
				stroke='#EBFBF8'
				strokeWidth='8'
			/>
			<path
				d='M18.1291 27.2117L37.8433 18.246M37.8433 18.246L34.1576 16.8574M37.8433 18.246L36.4719 21.9317M38.7176 39.1431H34.4319V27.1431C34.4319 26.9158 34.5222 26.6978 34.683 26.537C34.8437 26.3763 35.0617 26.286 35.2891 26.286H37.8605C38.0878 26.286 38.3058 26.3763 38.4666 26.537C38.6273 26.6978 38.7176 26.9158 38.7176 27.1431V39.1431ZM30.1462 39.1431H25.8605V29.7146C25.8605 29.4872 25.9508 29.2692 26.1115 29.1085C26.2723 28.9477 26.4903 28.8574 26.7176 28.8574H29.2891C29.5164 28.8574 29.7344 28.9477 29.8952 29.1085C30.0559 29.2692 30.1462 29.4872 30.1462 29.7146V39.1431ZM21.5748 39.1431H17.2891V32.286C17.2891 32.0587 17.3794 31.8406 17.5401 31.6799C17.7009 31.5192 17.9189 31.4288 18.1462 31.4288H20.7176C20.945 31.4288 21.163 31.5192 21.3237 31.6799C21.4845 31.8406 21.5748 32.0587 21.5748 32.286V39.1431Z'
				stroke='#34DAB9'
				strokeWidth='1.6'
				strokeLinecap='round'
				strokeLinejoin='round'
			/>
		</svg>
	)
	const icons = [i1, i2, i3, i4, i5]
	useEffect(() => {
		const intervalId = setInterval(() => {
			setopenTab((prevItem) => (prevItem + 1) % 5)
		}, 10000)

		return () => clearInterval(intervalId)
	}, [])

	return (
		<>
			<section className='bg-slate-50 min-h-[66rem]'>
				<div className='container '>
					<div className='text-center max-w-lg mx-auto'>
						<span className='text-key'>{feature?.section.name}</span>
						<h2>{feature?.section.title}</h2>
						<span>{feature?.section.subTitle}</span>
					</div>
					<div className='grid lg:grid-cols-2 gap-12  items-start mt-20'>
						<div className='flex flex-col'>
							{feature.features.map((data, index) => {
								const isTabOpen = openTab === index
								return (
									<div
										className={`${
											isTabOpen ? 'tab-active' : 'border-b'
										} flex lg:flex-row flex-col gap-3 py-8 px-6 w-full cursor-pointer`}
										key={index}
									>
										<div>{icons[index] ? icons[index] : icons[0]}</div>

										<div>
											<h3
												className='text-2xl pt-3 cursor-pointer flex items-center gap-3 font-normal'
												role='button'
												onClick={() => {
													setopenTab(index)
												}}
											>
												{data.title}
											</h3>
											<div
												className={`${isTabOpen ? 'tab-open' : ''} tab-block`}
											>
												<div className='content'>{data.description}</div>
											</div>
										</div>
									</div>
								)
							})}
						</div>
						<Sticky offsetTop={80} offsetBottom={20}>
							<div className='hidden lg:block'>
								{feature.features.map((data, index) => {
									// console.log(data);
									return (
										<div key={index}>
											{data.images.map((item) => {
												return (
													<div
														className={`${
															openTab === index ? '' : 'hidden '
														}`}
														key={`Image` + index}
													>
														<figure className='relative min-w-44 min-h-[32rem] block'>
															<Image
																src={getStrapiMedia(item?.media)}
																fill
																sizes='100vh'
																priority
																className='object-contain'
																alt={item.alt}
															/>
														</figure>
													</div>
												)
											})}
										</div>
									)
								})}
							</div>
						</Sticky>
					</div>
				</div>
			</section>
		</>
	)
}
